'use client'

import Button from "./buttons"
import Link from "next/link"
import { useState } from "react"

interface Buttons {
  upcount:number|null, 
  downcount:number|null,
  commentscount:number|null,
  id:string,
  userId:string|undefined,
  sessionUserId:string|undefined,
  vote:boolean|undefined|null
}

  const up = <svg width="25" height="25" viewBox="0 0 33 29" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M2.00002 24.1667L1.99766 24.1667C1.9675 24.1667 1.93791 24.1585 1.91209 24.1429C1.88629 24.1273 1.86524 24.1049 1.85124 24.0782C1.83725 24.0515 1.83084 24.0215 1.83272 23.9914C1.8346 23.9613 1.84469 23.9323 1.86189 23.9075L1.86331 23.9055L16.8594 2.24451C16.8619 2.24275 16.8667 2.23974 16.8747 2.23594C16.9002 2.2239 16.9447 2.21124 17.0015 2.21124C17.0583 2.21124 17.1025 2.22391 17.1275 2.23572C17.1348 2.23917 17.1393 2.24191 17.1417 2.24359L32.1349 23.9005C32.1352 23.9009 32.1355 23.9013 32.1358 23.9017C32.1528 23.9269 32.1627 23.9562 32.1645 23.9866C32.1663 24.0175 32.1597 24.0483 32.1453 24.0756C32.131 24.103 32.1094 24.126 32.083 24.142C32.0569 24.1578 32.027 24.1664 31.9965 24.1667L2.00002 24.1667ZM17.1382 2.23857L17.1384 2.23881L17.1382 2.23857Z"  stroke="#DA0037" strokeWidth="3"/>
  </svg>

  const down = <svg width="25" height="27" viewBox="0 0 33 26" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M31.6648 1.5L31.6671 1.5C31.6973 1.49995 31.7269 1.50817 31.7527 1.52376C31.7785 1.53934 31.7996 1.56171 31.8136 1.58843C31.8275 1.61514 31.834 1.64517 31.8321 1.67527C31.8302 1.70537 31.8201 1.73438 31.8029 1.75914L31.8015 1.76118L16.8054 23.4221C16.8029 23.4239 16.7981 23.4269 16.7901 23.4307C16.7646 23.4428 16.7201 23.4554 16.6633 23.4554C16.6065 23.4554 16.5623 23.4428 16.5373 23.4309C16.53 23.4275 16.5255 23.4247 16.5231 23.4231L1.52985 1.7662C1.52958 1.7658 1.52931 1.7654 1.52904 1.765C1.51203 1.73976 1.50211 1.71043 1.50031 1.68006C1.49848 1.64918 1.5051 1.6184 1.51946 1.59102C1.53382 1.56365 1.55538 1.5407 1.58182 1.52466C1.60793 1.50881 1.63781 1.5003 1.66831 1.5L31.6648 1.5ZM16.5266 23.4281L16.5264 23.4278L16.5266 23.4281Z"  stroke="#DA0037" strokeWidth="3"/>
  </svg>

  const upFilled = <svg width="25" height="25" viewBox="0 0 33 29" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M2.00002 24.1667L1.99766 24.1667C1.9675 24.1667 1.93791 24.1585 1.91209 24.1429C1.88629 24.1273 1.86524 24.1049 1.85124 24.0782C1.83725 24.0515 1.83084 24.0215 1.83272 23.9914C1.8346 23.9613 1.84469 23.9323 1.86189 23.9075L1.86331 23.9055L16.8594 2.24451C16.8619 2.24275 16.8667 2.23974 16.8747 2.23594C16.9002 2.2239 16.9447 2.21124 17.0015 2.21124C17.0583 2.21124 17.1025 2.22391 17.1275 2.23572C17.1348 2.23917 17.1393 2.24191 17.1417 2.24359L32.1349 23.9005C32.1352 23.9009 32.1355 23.9013 32.1358 23.9017C32.1528 23.9269 32.1627 23.9562 32.1645 23.9866C32.1663 24.0175 32.1597 24.0483 32.1453 24.0756C32.131 24.103 32.1094 24.126 32.083 24.142C32.0569 24.1578 32.027 24.1664 31.9965 24.1667L2.00002 24.1667ZM17.1382 2.23857L17.1384 2.23881L17.1382 2.23857Z" fill="#DA0037" stroke="#DA0037" strokeWidth="3"/>
  </svg>

  const downFilled = <svg width="25" height="27" viewBox="0 0 33 26" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M31.6648 1.5L31.6671 1.5C31.6973 1.49995 31.7269 1.50817 31.7527 1.52376C31.7785 1.53934 31.7996 1.56171 31.8136 1.58843C31.8275 1.61514 31.834 1.64517 31.8321 1.67527C31.8302 1.70537 31.8201 1.73438 31.8029 1.75914L31.8015 1.76118L16.8054 23.4221C16.8029 23.4239 16.7981 23.4269 16.7901 23.4307C16.7646 23.4428 16.7201 23.4554 16.6633 23.4554C16.6065 23.4554 16.5623 23.4428 16.5373 23.4309C16.53 23.4275 16.5255 23.4247 16.5231 23.4231L1.52985 1.7662C1.52958 1.7658 1.52931 1.7654 1.52904 1.765C1.51203 1.73976 1.50211 1.71043 1.50031 1.68006C1.49848 1.64918 1.5051 1.6184 1.51946 1.59102C1.53382 1.56365 1.55538 1.5407 1.58182 1.52466C1.60793 1.50881 1.63781 1.5003 1.66831 1.5L31.6648 1.5ZM16.5266 23.4281L16.5264 23.4278L16.5266 23.4281Z" fill="#DA0037" stroke="#DA0037" strokeWidth="3"/>
  </svg>
  
  const comment = <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 48 48" fill="none">
  <path d="M24 46C28.3512 46 32.6047 44.7097 36.2225 42.2923C39.8404 39.8749 42.6602 36.439 44.3253 32.419C45.9905 28.3991 46.4261 23.9756 45.5773 19.708C44.7284 15.4404 42.6331 11.5204 39.5563 8.44366C36.4796 5.3669 32.5596 3.27161 28.292 2.42273C24.0244 1.57386 19.6009 2.00953 15.581 3.67466C11.561 5.33979 8.12506 8.15958 5.70767 11.7775C3.29028 15.3953 2 19.6488 2 24C2 27.6373 2.88 31.0644 4.44444 34.0882L2 46L13.9118 43.5556C16.9331 45.1176 20.3651 46 24 46Z" stroke="#DA0037" strokeWidth="4" strokeLinecap="round" strokeLinejoin="round"/>
  </svg>

  const share = <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 45 38" fill="none">
  <path d="M44.4924 13.3136L34.1081 23.677C33.7834 24.0011 33.3429 24.1831 32.8836 24.1831C32.4244 24.1831 31.9839 24.0011 31.6591 23.677C31.3344 23.3529 31.1519 22.9133 31.1519 22.4549C31.1519 21.9966 31.3344 21.557 31.6591 21.2329L39.0904 13.8188H30.5039C26.2824 13.8176 22.1802 15.2168 18.8424 17.7963C15.5047 20.3757 13.1206 23.9892 12.0653 28.0684C11.9505 28.5122 11.6638 28.8923 11.2682 29.1251C10.8727 29.3579 10.4006 29.4244 9.95595 29.3099C9.51128 29.1954 9.13041 28.9092 8.89712 28.5145C8.66383 28.1197 8.59724 27.6486 8.712 27.2048C9.95728 22.3827 12.7743 18.1109 16.7196 15.062C20.6648 12.0132 25.5141 10.3606 30.5039 10.3643H39.0947L31.6591 2.9502C31.4983 2.78973 31.3708 2.59921 31.2838 2.38954C31.1967 2.17987 31.1519 1.95514 31.1519 1.72819C31.1519 1.50124 31.1967 1.27651 31.2838 1.06684C31.3708 0.857166 31.4983 0.666652 31.6591 0.506175C31.9839 0.182076 32.4244 0 32.8836 0C33.111 0 33.3362 0.044701 33.5463 0.131551C33.7564 0.2184 33.9473 0.345698 34.1081 0.506175L44.4924 10.8695C44.6533 11.03 44.781 11.2205 44.8681 11.4301C44.9552 11.6398 45 11.8646 45 12.0916C45 12.3185 44.9552 12.5433 44.8681 12.753C44.781 12.9627 44.6533 13.1532 44.4924 13.3136ZM36.3451 34.5455H3.46143V8.6371C3.46143 8.17902 3.27909 7.73969 2.95452 7.41577C2.62995 7.09185 2.18973 6.90988 1.73072 6.90988C1.2717 6.90988 0.831488 7.09185 0.506915 7.41577C0.182343 7.73969 0 8.17902 0 8.6371V34.5455C0 35.4617 0.364686 36.3404 1.01383 36.9882C1.66298 37.636 2.5434 38 3.46143 38H36.3451C36.8041 38 37.2443 37.818 37.5689 37.4941C37.8934 37.1702 38.0758 36.7309 38.0758 36.2728C38.0758 35.8147 37.8934 35.3754 37.5689 35.0514C37.2443 34.7275 36.8041 34.5455 36.3451 34.5455Z" fill="#DA0037"/>
  </svg>

  const deleteIcon = <svg width="25" height="25" viewBox="-8 -2.5 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M1 5.60526H21M13.8 11.1974V19.75M8.04 11.1974V19.75M7.4 5.60526V1.65789C7.4 1.29454 7.68653 1 8.04 1H14.12C14.4735 1 14.76 1.29454 14.76 1.65789V5.60526M19.56 9.22368L18.2571 23.6123C18.1346 24.9654 17.03 26 15.7081 26H6.1319C4.80998 26 3.70544 24.9654 3.58291 23.6123L2.28 9.22368" stroke="#DA0037" strokeWidth="2" strokeLinecap="round"/>
  </svg>

export default function AllButtons({upcount, downcount, commentscount, id, userId, sessionUserId, vote}:Buttons) {
  const [votestate,updateVote] = useState(vote)
  const [upCount,updateUpcount] = useState(upcount)
  const [downCount,updateDownCount] = useState(downcount)

  function VoteButton(){
    if (sessionUserId != undefined) {
      return( 
      <>
        <Button 
            svg={votestate ? upFilled : up}
            count={upCount} 
            id={id}
            buttonType = 'UpVote'
            voteState = {votestate}
            changeCount={votestate ? -1 : 1} 
            countUpdate={updateUpcount}   
            alterCountUpdate={updateDownCount} 
            stateUpdate={updateVote} 
            state={votestate ? undefined : true} 
            
          />
          <Button 
            svg={votestate == false ? downFilled : down} 
            count={downCount} 
            id={id} 
            buttonType = 'DownVote'
            voteState = {votestate}
            changeCount={votestate == false ? -1 : 1} 
            countUpdate={updateDownCount} 
            alterCountUpdate = {updateUpcount}
            stateUpdate={updateVote} 
            state={votestate == false ? null : false} 
            />
      </>
      )
    }
  }
  
  return( 
    <div className="w-full flex justify-between items-end mt-[3rem]"> 
      <div className="flex ">
        <VoteButton/>
      </div>
      <div className="flex flex-right">
        {
          sessionUserId == userId ? <Button  svg={deleteIcon} count={null} id={id} buttonType="Delete"  /> : <div className={"flex items-center mr-[15px]"}></div>
        }
        <Button svg={share} count={null} id={id} buttonType="Share" className="mr-[0px!important]"/>
      </div>

    </div>
  )
}